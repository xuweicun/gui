<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Basic -->
    <meta charset="UTF-8"/>

    <title>存储柜管理 | 中国国家图书馆</title>

    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>

    <!-- Import google fonts -->


    <!-- start: CSS file-->

    <!-- Vendor CSS-->
    <link href="/Public/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="/Public/assets/vendor/skycons/css/skycons.css" rel="stylesheet"/>
    <link href="/Public/assets/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="/Public/assets/vendor/css/pace.preloader.css" rel="stylesheet"/>

    <!-- Plugins CSS-->
    <link href="/Public/assets/plugins/jquery-ui/css/jquery-ui-1.10.4.min.css" rel="stylesheet"/>
    <link href="/Public/assets/plugins/scrollbar/css/mCustomScrollbar.css" rel="stylesheet"/>
    <link href="/Public/assets/plugins/bootkit/css/bootkit.css" rel="stylesheet"/>
    <link href="/Public/assets/plugins/magnific-popup/css/magnific-popup.css" rel="stylesheet"/>
    <link href="/Public/assets/plugins/fullcalendar/css/fullcalendar.css" rel="stylesheet"/>
    <link href="/Public/assets/plugins/jqvmap/jqvmap.css" rel="stylesheet"/>
    <link href="/Public/assets/plugins/pnotify/css/pnotify.custom.css" rel="stylesheet"/>
    <link href="/Public/assets/plugins/select2/select2.css" rel="stylesheet" />
    <link href="/Public/assets/plugins/jquery-datatables-bs3/css/datatables.css" rel="stylesheet" />		
    <!-- Theme CSS -->
    <link href="/Public/assets/css/jquery.mmenu.css" rel="stylesheet"/>

    <!-- Page CSS -->
    <link href="/Public/assets/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="/Public/assets/css/angular-datatables.min.css" rel="stylesheet" />
    <link href="/Public/assets/css/datatables.bootstrap.min.css" rel="stylesheet" />
    <link href="/Public/assets/css/style.css" rel="stylesheet"/>
    <link href="/Public/assets/css/add-ons.min.css" rel="stylesheet"/>

    <!-- end: CSS file-->


    <!-- Head Libs -->
    <script src="/Public/assets/plugins/modernizr/js/modernizr.js"></script>
    <style>
        li.selected a {
            background-color: green;
        }
        div.selected{
            border: 2px solid darkred !important;
        }
        div.non-selected{
            border: 2px solid white !important;
        }
        .btn-selected {
            border: 2px solid darkred !important;
            color: darkred;
        }
        .btn-not-selected {
            border: 2px solid lightgray !important;
        }

        body {
            min-height: 1000px;
        }
    </style>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>


    <![endif]-->

</head>


<body ng-app="device" ng-controller="statusMonitor  as showCase">
<div ng-include="pageViewUrls.modalHelperUrl"></div>
<div ng-include="pageViewUrls.userModalsUrl"></div>
<!-- Start: Header -->
<div class="navbar" role="navigation">
    <div class="container-fluid container-nav">
        <!-- Navbar Action -->
        <ul class="nav navbar-nav navbar-actions navbar-left">
            <li class="visible-md visible-lg"><a href="#" id="main-menu-toggle"><i class="fa fa-th-large"></i></a></li>
            <li class="visible-xs visible-sm"><a href="#" id="sidebar-menu"><i class="fa fa-navicon"></i></a></li>
        </ul>
        <!-- Navbar Left -->
        <div class="navbar-left">
            <!-- Search Form -->
            <form class="search navbar-form">
                <div class="input-group input-search">
                    <a href="/index.php?m=admin&c=business&a=search" target="_blank" class="btn btn-primary btn-xs">文件搜索</a>
                </div>
            </form>
        </div>
        <!-- Navbar Right -->
        <div class="navbar-right">
            <!-- Notifications
            <div ng-include="pageViewUrls.notifyViewUrl"></div>
                 -->
            <!-- End Notifications -->
            <!-- Userbox -->
            <div class="userbox">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                    <!--<figure class="profile-picture hidden-xs">
                        <img src="/Public/assets/img/avatar.jpg" class="img-circle" alt="" />
                    </figure>-->
                    <div class="profile-info">
                        <span class="name">您好,<{$username}></span>
                        <span class="role"><i class="fa fa-circle bk-fg-success"></i> <span ng-bind="role"></span>权限</span>
                        <span id="username" style="display:none"><{$username}></span>
                        <span id="userid" style="display:none"><{$userid}></span>
                        <span id="can_write" style="display:none"><{$can_write}></span>
                        <span id="token" style="display:none"><{token}></span>
                    </div>
                    <i class="fa custom-caret"></i>
                </a>

                <div class="dropdown-menu">
                    <ul class="list-unstyled">
                        <li class="dropdown-menu-header bk-bg-white bk-margin-top-15">
                            <div class="progress progress-xs  progress-striped active">
                                <div class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="60"
                                     aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
                                    60%
                                </div>
                            </div>
                        </li>
                        <li>
                            <a href=""><i class="fa fa-user"></i> 管理员信息</a>
                        </li>
                        <li>
                            <a href=""><i class="fa fa-wrench"></i> 参数配置</a>
                        </li>

                        <li>
                            <a href="" ng-click="user_profile.showChangePasswordModal()"><i class="fa fa-usd"></i> 修改密码</a>
                        </li>

                        <li>
                            <a href="#modalAnimLogout" class="modal-with-move-anim"><i class="fa fa-power-off"></i> 注销</a>

                            <div id="modalAnimLogout" class="zoom-anim-dialog modal-block modal-block-warning mfp-hide">
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h4 class="panel-title">用户注销</h4>
                                    </div>
                                    <div class="panel-body bk-noradius">
                                        <div class="modal-wrapper">
                                            <div class="modal-icon">
                                                <i class="fa fa-warning"></i>
                                            </div>
                                            <div class="modal-text">
                                                <p>
                                                    您确定注销用户登录？
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel-footer">
                                        <div class="row">
                                            <div class="col-md-12 text-right">
                                                <a href="/index.php?m=Admin&c=Business&a=logout" class="btn btn-warning">确定</a>
                                                <a class="btn btn-warning modal-dismiss">取消</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <!-- End Userbox -->
        </div>
        <!-- End Navbar Right -->
    </div>
</div>
<!-- End: Header -->
<div class="container-fluid content">
    <div class="row">
        <div class="sidebar">
            <div ng-include="pageViewUrls.siderBarUrl"></div>
        </div>
        <div class="main">
            <!-- Start: Content -->
            <div ng-include="pageViewUrls.cabUrl"></div>
            <div class="container-fluid content">
                <div class="row">
                    <div class="panel panel-default col-lg-9">
                        <div class="panel-heading">
                            <i class="fa fa-building-o"></i>数据存储柜({{cab.id}}#)
                            <a href="" class="btn btn-danger pull-right btn-xs bk-margin-5" ng-click="deploy(cab.id);" ng-disabled="deployer.working;" title="查询过程中请勿进行其他操作，以免查询失败">当前柜磁盘信息查询</a>
                            <a ng-click="cab.start_cmd_device_status()"
                               class="btn btn-primary btn-xs pull-right bk-margin-5" 
                               ng-class="{ true:'btn-warning', false:'btn-primary' }[cab.is_device_status_cmd_going()]"
                               title="查询当前柜磁盘在位信息">
                                当前柜磁盘在位查询
                            </a> 
                        </div>
                        <div class="panel-body" ng-include="pageViewUrls.cabinetViewUrl">
                        </div>
                    </div>
                    <div class="panel panel-default col-lg-3">
                        <div class="panel-heading">
                            <i class="glyphicon glyphicon-hdd bk-margin-left-5"></i>插槽信息
                        </div>
                        <div class="panel-body" ng-include="pageViewUrls.diskViewUrl">
                        </div>
                    </div>
                </div>
            </div>
            <!--/container-->
            <div id="modalAnimDeviceStatusCmd" class="zoom-anim-dialog modal-block  mfp-hide"
                 ng-class="{true:'modal-block-primary',false:'modal-block-warning'}[!cab.is_device_status_cmd_going()]" >
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title">存储柜命令[在位查询]</h4>
                    </div>
                    <div class="panel-body bk-noradius">
                        <div class="modal-wrapper">
                            <div class="modal-icon">
                                <i class="fa"
                                   ng-class="{true:'fa-warning',false:'fa-question-circle'}[cab.is_device_status_cmd_going()]"
                                   ></i>
                            </div>
                            <div class="modal-text">
                                <p ng-if="!cab.is_device_status_cmd_going()">
                                    您确定要提交对存储柜 {{cab.id}}#的“在位查询”命令吗？
                                </p>

                                <p ng-if="cab.is_device_status_cmd_going()">
                                    存储柜 {{cab.id}}#正在进行的“在位查询”命令，请稍候。
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="panel-footer">
                        <div class="row">
                            <div class="col-md-12 text-right" ng-if="!cab.is_device_status_cmd_going()">
                                <button class="btn btn-primary"
                                        ng-click="cab.start_cmd_device_status()">
                                    确认
                                </button>
                                <button class="btn btn-default modal-dismiss">取消</button>
                            </div>
                            <div class="col-md-12 text-right" ng-if="cab.is_device_status_cmd_going()">
                                <button class="btn btn-warning modal-dismiss">确认</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid content" ng-show="taskPool.ready==true" ng-controller="InitCtrl">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" ng-include="pageViewUrls.taskViewUrl">
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>


<!-- start: JavaScript-->

<!-- Vendor JS-->
<script src="/Public/assets/vendor/js/jquery.min.js"></script>
<script src="/Public/assets/vendor/js/jquery-2.1.1.min.js"></script>
<script src="/Public/assets/vendor/js/jquery-migrate-1.2.1.min.js"></script>
<script src="/Public/assets/vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="/Public/assets/vendor/skycons/js/skycons.js"></script>
<script src="/Public/assets/vendor/js/pace.min.js"></script>

<!-- Plugins JS-->
<script src="/Public/assets/plugins/jquery-ui/js/jquery-ui-1.10.4.min.js"></script>
<script src="/Public/assets/plugins/scrollbar/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="/Public/assets/plugins/bootkit/js/bootkit.js"></script>
<script src="/Public/assets/plugins/magnific-popup/js/magnific-popup.js"></script>
<script src="/Public/assets/plugins/moment/js/moment.min.js"></script>

<script src="/Public/assets/plugins/select2/select2.js"></script>
<script src="/Public/assets/plugins/jquery-datatables/media/js/jquery.dataTables.js"></script>
    <script src="/Public/js/angular-1.4.min.js"></script>
<script src="/Public/assets/plugins/jquery-datatables/extras/TableTools/js/dataTables.tableTools.min.js"></script>
<script src="/Public/assets/plugins/jquery-datatables-bs3/js/datatables.js"></script>
<!-- Theme JS -->
<script src="/Public/assets/js/jquery.mmenu.min.js"></script>
<script src="/Public/assets/js/core.min.js"></script>

<!-- Pages JS -->
<script src="/Public/assets/js/pages/ui-modals.js"></script>
<script src="/Public/assets/plugins/jquery-validation/js/jquery.validate.js"></script>
<script src="/Public/assets/plugins/pnotify/js/pnotify.custom.js"></script>

    <script src="/Public/js/angular-sanitize.min.js"></script>
    <script src="/Public/js/md5.js"></script>

    <!-- global variables define -->
    <script src="/Public/js/cabinet/globalvars.js"></script>

    <!-- 用于前端命令处理 -->

    <script src="/Public/js/cabinet/modalhelper.js"></script>
    <script src="/Public/js/cabinet/CabCmd.js"></script>
    <script src="/Public/js/cabinet/CabCmd.js"></script>
    <script src="/Public/js/cabinet/CabCmdHelper.js"></script>
    <script src="/Public/js/cabinet/TaskPool.js"></script>
    <script src="/Public/js/cabinet/cabinethelper.js"></script>
    <script src="/Public/js/cabinet/deployer.js"></script>
     <!-- cabinet.js 必须放到 globaljs.js之前 -->
    <script src="/Public/js/cabinet/Disk.js"></script>
    <script src="/Public/js/cabinet/cabinet.js"></script>
    <script src="/Public/js/cabinet/user.js"></script>

    <script src="/Public/js/cabinet/globaljs.js"></script>   
     
    <!-- page_init.js 必须放到 globaljs.js之后 -->
    <script src="/Public/js/cabinet/page_init.js"></script>
    <script src="/Public/js/cabinet/services.js"></script>

    <script src="/Public/js/angular-datatables.min.js"></script>
<!-- end: JavaScript-->


</body>

</html>
